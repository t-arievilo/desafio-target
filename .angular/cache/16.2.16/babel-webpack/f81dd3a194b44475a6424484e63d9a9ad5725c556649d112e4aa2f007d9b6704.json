{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/estoque.service\";\nexport class EstoqueComponent {\n  constructor(estoqueService) {\n    this.estoqueService = estoqueService;\n    this.produtos = [];\n    this.movimentacao = {\n      codigoProduto: 0,\n      descricao: '',\n      quantidade: 0,\n      tipoMovimentacao: 'ENTRADA'\n    };\n    this.carregando = false;\n    this.ultimaMovimentacao = null;\n  }\n  ngOnInit() {\n    this.carregarProdutos();\n  }\n  carregarProdutos() {\n    this.carregando = true;\n    this.estoqueService.obterProdutos().subscribe({\n      next: produtos => {\n        this.produtos = produtos;\n        this.carregando = false;\n        // Seleciona o primeiro produto por padrão\n        if (produtos.length > 0 && this.movimentacao.codigoProduto === 0) {\n          this.movimentacao.codigoProduto = produtos[0].codigoProduto;\n        }\n      },\n      error: erro => {\n        console.error('Erro ao carregar produtos:', erro);\n        this.carregando = false;\n        alert('Erro ao carregar produtos do estoque');\n      }\n    });\n  }\n  registrarMovimentacao() {\n    if (!this.validarMovimentacao()) return;\n    this.carregando = true;\n    this.estoqueService.registrarMovimentacao(this.movimentacao).subscribe({\n      next: response => {\n        this.ultimaMovimentacao = response;\n        this.carregando = false;\n        // Recarrega a lista de produtos para atualizar os estoques\n        this.carregarProdutos();\n        this.movimentacao.descricao = '';\n        this.movimentacao.quantidade = 0;\n      },\n      error: erro => {\n        console.error('Erro ao registrar movimentação:', erro);\n        this.carregando = false;\n        alert('Erro ao registrar movimentação. Verifique o estoque disponível.');\n      }\n    });\n  }\n  validarMovimentacao() {\n    if (this.movimentacao.codigoProduto === 0) {\n      alert('Selecione um produto');\n      return false;\n    }\n    if (!this.movimentacao.descricao.trim()) {\n      alert('Informe uma descrição para a movimentação');\n      return false;\n    }\n    if (this.movimentacao.quantidade <= 0) {\n      alert('A quantidade deve ser maior que zero');\n      return false;\n    }\n    return true;\n  }\n  getProdutoSelecionado() {\n    return this.produtos.find(p => p.codigoProduto === this.movimentacao.codigoProduto);\n  }\n  static {\n    this.ɵfac = function EstoqueComponent_Factory(t) {\n      return new (t || EstoqueComponent)(i0.ɵɵdirectiveInject(i1.EstoqueService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: EstoqueComponent,\n      selectors: [[\"app-estoque\"]],\n      decls: 2,\n      vars: 0,\n      template: function EstoqueComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"p\");\n          i0.ɵɵtext(1, \"estoque works!\");\n          i0.ɵɵelementEnd();\n        }\n      },\n      styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n}","map":{"version":3,"names":["EstoqueComponent","constructor","estoqueService","produtos","movimentacao","codigoProduto","descricao","quantidade","tipoMovimentacao","carregando","ultimaMovimentacao","ngOnInit","carregarProdutos","obterProdutos","subscribe","next","length","error","erro","console","alert","registrarMovimentacao","validarMovimentacao","response","trim","getProdutoSelecionado","find","p","i0","ɵɵdirectiveInject","i1","EstoqueService","selectors","decls","vars","template","EstoqueComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd"],"sources":["C:\\Users\\Leonardo\\DesafioTarget\\desafio-target-frontend\\src\\app\\components\\estoque\\estoque.component.ts","C:\\Users\\Leonardo\\DesafioTarget\\desafio-target-frontend\\src\\app\\components\\estoque\\estoque.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { EstoqueService, Produto, MovimentacaoRequest, MovimentacaoResponse } from '../../services/estoque.service';\n\n@Component({\n  selector: 'app-estoque',\n  templateUrl: './estoque.component.html',\n  styleUrls: ['./estoque.component.css']\n})\nexport class EstoqueComponent implements OnInit {\n  produtos: Produto[] = [];\n  movimentacao: MovimentacaoRequest = {\n    codigoProduto: 0,\n    descricao: '',\n    quantidade: 0,\n    tipoMovimentacao: 'ENTRADA'\n  };\n  \n  carregando = false;\n  ultimaMovimentacao: MovimentacaoResponse | null = null;\n\n  constructor(private estoqueService: EstoqueService) {}\n\n  ngOnInit() {\n    this.carregarProdutos();\n  }\n\n  carregarProdutos() {\n    this.carregando = true;\n    this.estoqueService.obterProdutos().subscribe({\n      next: (produtos) => {\n        this.produtos = produtos;\n        this.carregando = false;\n        \n        // Seleciona o primeiro produto por padrão\n        if (produtos.length > 0 && this.movimentacao.codigoProduto === 0) {\n          this.movimentacao.codigoProduto = produtos[0].codigoProduto;\n        }\n      },\n      error: (erro) => {\n        console.error('Erro ao carregar produtos:', erro);\n        this.carregando = false;\n        alert('Erro ao carregar produtos do estoque');\n      }\n    });\n  }\n\n  registrarMovimentacao() {\n    if (!this.validarMovimentacao()) return;\n\n    this.carregando = true;\n    this.estoqueService.registrarMovimentacao(this.movimentacao).subscribe({\n      next: (response) => {\n        this.ultimaMovimentacao = response;\n        this.carregando = false;\n        \n        // Recarrega a lista de produtos para atualizar os estoques\n        this.carregarProdutos();\n        \n        this.movimentacao.descricao = '';\n        this.movimentacao.quantidade = 0;\n      },\n      error: (erro) => {\n        console.error('Erro ao registrar movimentação:', erro);\n        this.carregando = false;\n        alert('Erro ao registrar movimentação. Verifique o estoque disponível.');\n      }\n    });\n  }\n\n  private validarMovimentacao(): boolean {\n    if (this.movimentacao.codigoProduto === 0) {\n      alert('Selecione um produto');\n      return false;\n    }\n    if (!this.movimentacao.descricao.trim()) {\n      alert('Informe uma descrição para a movimentação');\n      return false;\n    }\n    if (this.movimentacao.quantidade <= 0) {\n      alert('A quantidade deve ser maior que zero');\n      return false;\n    }\n    return true;\n  }\n\n  getProdutoSelecionado(): Produto | undefined {\n    return this.produtos.find(p => p.codigoProduto === this.movimentacao.codigoProduto);\n  }\n}\n","<p>estoque works!</p>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}