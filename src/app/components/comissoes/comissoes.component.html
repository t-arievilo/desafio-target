<div class="card">
  <div class="card-header">
    <h2>ğŸ’° Sistema de ComissÃµes</h2>
    <p>Adicione vendas e calcule comissÃµes automaticamente</p>
  </div>

  <div class="card-body">
    <div class="form-container">
      <h3>Adicionar Venda</h3>
      <div class="form-group">
        <input
          type="text"
          [(ngModel)]="novaVenda.vendedor"
          placeholder="Nome do vendedor"
          class="form-input"
        />
        <input
          type="number"
          [value]="novaVenda.valor === 0 ? '' : novaVenda.valor"
          (input)="atualizarValorVenda($event)"
          placeholder="Valor da venda"
          min="0"
          step="0.01"
          class="form-input"
        />
        <button (click)="adicionarVenda()" class="btn-adicionar">
          â• Adicionar
        </button>
      </div>
    </div>

    <div *ngIf="vendas.length > 0" class="vendas-adicionadas">
      <h3>Vendas Adicionadas ({{ vendas.length }})</h3>
      <div class="vendas-list">
        <div *ngFor="let venda of vendas; let i = index" class="venda-item">
          <span class="venda-info">
            <strong>{{ venda.vendedor }}</strong> - R$
            {{ venda.valor.toFixed(2) }}
          </span>
          <button (click)="removerVenda(i)" class="btn-remover">ğŸ—‘ï¸</button>
        </div>
      </div>

      <div class="acoes">
        <button
          (click)="calcularComissoes()"
          [disabled]="carregando"
          class="btn-calcular"
        >
          {{ carregando ? "ğŸ”„ Calculando..." : "ğŸ§® Calcular ComissÃµes" }}
        </button>
        <button (click)="limparDados()" class="btn-limpar">
          ğŸ—‘ï¸ Limpar Tudo
        </button>
      </div>
    </div>

    <div *ngIf="resultado.length > 0" class="resultados">
      <h3>ğŸ“Š Resultados das ComissÃµes</h3>

      <div *ngFor="let vendedor of resultado" class="vendedor-card">
        <div class="vendedor-header">
          <strong>{{ vendedor.vendedor }}</strong>
        </div>

        <div class="vendas-list">
          <div
            *ngFor="let venda of vendedor.vendasComComissao"
            class="venda-resultado"
          >
            <span class="valor">R$ {{ venda.valorVenda.toFixed(2) }}</span>
            <span class="comissao"
              >ComissÃ£o: R$ {{ venda.comissao.toFixed(2) }}</span
            >
            <span class="percentual">({{ venda.percentualComissao }}%)</span>
          </div>
        </div>

        <div class="vendedor-total">
          <strong
            >Total ComissÃµes: R$
            {{ calcularTotalVendedor(vendedor).toFixed(2) }}</strong
          >
        </div>
      </div>
    </div>

    <div *ngIf="vendas.length === 0 && !carregando" class="sem-dados">
      <p>â• Adicione vendas usando o formulÃ¡rio acima</p>
    </div>
  </div>
</div>
