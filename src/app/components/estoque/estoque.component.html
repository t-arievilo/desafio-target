<div class="card">
  <div class="card-header">
    <h2>ðŸ“¦ Controle de Estoque</h2>
    <p>Gerencie entradas e saÃ­das de produtos</p>
  </div>
  
  <div class="card-body">
    <!-- Lista de Produtos em Estoque -->
    <div class="estoque-section">
      <h3>ðŸ“‹ Produtos em Estoque</h3>
      <div *ngIf="carregando && produtos.length === 0" class="loading">
        ðŸ”„ Carregando produtos...
      </div>
      
      <div *ngIf="produtos.length > 0" class="produtos-grid">
        <div *ngFor="let produto of produtos" class="produto-card" 
             [class.selected]="produto.codigoProduto === movimentacao.codigoProduto">
          <div class="produto-info">
            <strong>{{ produto.descricaoProduto }}</strong>
            <span class="codigo">CÃ³d: {{ produto.codigoProduto }}</span>
          </div>
          <div class="estoque-info">
            <span class="quantidade" [class.baixo]="produto.estoque < 50">
              {{ produto.estoque }} unidades
            </span>
          </div>
        </div>
      </div>
    </div>

    <!-- FormulÃ¡rio de MovimentaÃ§Ã£o -->
    <div class="movimentacao-section">
      <h3>ðŸ”„ Registrar MovimentaÃ§Ã£o</h3>
      <div class="form-movimentacao">
        <div class="form-group">
          <label>Produto:</label>
          <select [(ngModel)]="movimentacao.codigoProduto" class="form-select">
            <option *ngFor="let produto of produtos" [value]="produto.codigoProduto">
              {{ produto.descricaoProduto }} (Estoque: {{ produto.estoque }})
            </option>
          </select>
        </div>

        <div class="form-group">
          <label>DescriÃ§Ã£o:</label>
          <input 
            type="text" 
            [(ngModel)]="movimentacao.descricao" 
            placeholder="Ex: Compra de fornecedor, Venda para cliente..."
            class="form-input"
          >
        </div>

        <div class="form-group">
          <label>Quantidade:</label>
          <input 
            type="number" 
            [(ngModel)]="movimentacao.quantidade" 
            min="1"
            class="form-input"
          >
        </div>

        <div class="form-group">
          <label>Tipo:</label>
          <div class="tipo-buttons">
            <button 
              (click)="movimentacao.tipoMovimentacao = 'ENTRADA'"
              [class.active]="movimentacao.tipoMovimentacao === 'ENTRADA'"
              class="btn-entrada"
            >
              âž• Entrada
            </button>
            <button 
              (click)="movimentacao.tipoMovimentacao = 'SAIDA'"
              [class.active]="movimentacao.tipoMovimentacao === 'SAIDA'"
              class="btn-saida"
            >
              âž– SaÃ­da
            </button>
          </div>
        </div>

        <button 
          (click)="registrarMovimentacao()" 
          [disabled]="carregando"
          class="btn-registrar"
        >
          {{ carregando ? 'ðŸ”„ Processando...' : 'ðŸ’¾ Registrar MovimentaÃ§Ã£o' }}
        </button>
      </div>
    </div>

    <!-- Resultado da Ãšltima MovimentaÃ§Ã£o -->
    <div *ngIf="ultimaMovimentacao" class="resultado-movimentacao">
      <h3>âœ… MovimentaÃ§Ã£o Registrada</h3>
      <div class="movimentacao-info">
        <p><strong>Produto:</strong> {{ getProdutoSelecionado()?.descricaoProduto }}</p>
        <p><strong>DescriÃ§Ã£o:</strong> {{ ultimaMovimentacao.movimentacao.descricao }}</p>
        <p><strong>Quantidade:</strong> {{ ultimaMovimentacao.movimentacao.quantidade }}</p>
        <p><strong>Tipo:</strong> {{ ultimaMovimentacao.movimentacao.tipoMovimentacao }}</p>
        <p><strong>Estoque Atual:</strong> {{ ultimaMovimentacao.estoqueAtual }} unidades</p>
      </div>
    </div>
  </div>
</div>
